# 帅比带你造轮子之IOC,AOP
###### qq:137904872
###### 装逼吹水甩锅交流群：53141769
IOC,AOP经常见这样说那样说，其实当你去尝试了解实现原理时发现就是这么简单，伟大的不是实现而是理论、想法、点子，创新从造轮子开始；<br><br>
目前只实现通过xml读取配置尚未使用注解，aop功能使用动态代理未使用cglib使用注意先实现接口，有点low以后有空再完善；

##### 目录：
###### 1. 加载配置文件:
###### 2. IOC/DI:
* 类的实例化：
* 属性的注入：
###### 3. AOP:
* 动态代理
* 切面
* 连接点
#### 此讲解建议结合源码一起看，因不善于讲解只说明关键点；
### 1. 加载配置文件：
此部分功能是加载xml中的配置信息处理好放入实体类中供其他处使用;

实体类：

直接采取spring配置文件格式：
![](https://github.com/q137904872/logo/blob/master/logo/%60PK9AP9S%60B3M%5BX9Y1U3G~IR.png)

配置文件加载接口：
类实例化工厂会调用此接口的这几个方法获取处理好的配置信息；
![](https://github.com/q137904872/logo/blob/master/logo/xml加载接口.png)

解析xml就没什么好讲的dom,sax,dom4j?

### 2.  IOC/DI:
IOC（控制反转）让容器完成类的实例化并通过注入给我们使用；
##### * 类的实例化：
通过配置文件的配置信息将要实例化的类通过反射完成实例化并放入map供以后取用；
![](https://github.com/q137904872/logo/blob/master/logo/实例化调用.png)
![](https://github.com/q137904872/logo/blob/master/logo/实例化.png)

##### * 属性的注入：
通过配置文件的配置信息将需要注入的属性通过反射调用set方法注入属性；<br>
判断值注入还是对象注入;
![](https://github.com/q137904872/logo/blob/master/logo/属性注入调用.png)
取得要注入属性,通过set加属性名获取该属性set方法反射调用即可完成注入,若为值注入因从配置文件中获取的都是String所有要先进行转换;
![](https://github.com/q137904872/logo/blob/master/logo/反射调用set方法.png)

### 3. AOP:
AOP(面向切面编程) 假如日志要求每个方法开始都要打印xxx方法开始执行,执行完打印xxx方法执行完成,但是突然有天要求内容改成xxx类xxx方法执行开始,我们可以事先定义一个方法专门打印这类信息,然后所有方法调用打印信息的那个方法,要求改打印内容也可以直接改那个方法就可以,但是假如有天要求一部分方法打印信息一部分不打印又该如何一个个去改？不存在的。<br>
为何不能在不影响源码的情况灵活决定在某方法执行前或执行后要执行什么内容咧；有的这就是AOP；<br>
我们可以把那个打印信息的方法叫做切面，所有原生方法叫做切点，而哪部分原生方法需要执行哪个切面就叫做连接点，我们可以通过随便改连接点就可以决定哪些方法需要执行哪些切面，而这又如何实现的了..你猜！<br>
##### *动态代理
这个东西不了解的我建议网上找下资料看下很简单我随便讲下；
